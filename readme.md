# 图像处理系统

## 系统简介

这是一个专业的图像处理分析系统，可以对图像进行多维度的质量评估和分析。系统通过多种算法对图像进行准确度、质量和纹理等方面的综合评估，生成详细的分析报告。

## 主要功能

- **图像准确度分析**：使用ImageHash算法评估图像的汉明距离，判断图像的相似性和重复性
- **图像质量分析**：使用OpenCV1算法评估图像的颜色匹配度、清晰度和噪声水平
- **图像纹理分析**：使用OpenCV2算法评估图像的纹理复杂度、元素完整性和画面质量
- **批量处理能力**：支持多张图片批量处理，并为每张图片生成独立报告
- **综合报告生成**：自动生成HTML格式的综合分析报告，便于查看和分享

## 系统结构

```
/image_processing_system/
├── backend/                    # 后端处理模块
│   ├── reports/                # 报告存储目录
│   │   └── task_XXX/           # 任务报告目录（按任务ID组织）
│   │       ├── report.html     # 主任务综合报告
│   │       ├── task_status.json  # 任务状态信息
│   │       ├── task_tracking.json  # 任务跟踪信息
│   │       └── img_X/          # 子任务处理目录（按图片序号组织）
│   │           ├── task_status.json  # 子任务状态信息
│   │           ├── temp_comparison/  # 临时比较文件
│   │           └── task_XXX_img_X/  # 子任务报告目录
│   │               ├── report.html  # 子任务综合报告
│   │               ├── 图像准确度+图像质量+图像纹理_*.html  # 带时间戳的综合报告
│   │               ├── 图像准确度_*.html  # 图像准确度单项报告
│   │               ├── 图像质量_*.html  # 图像质量单项报告
│   │               └── 图像纹理_*.html  # 图像纹理单项报告
├── frontend/                   # 前端界面模块
└── models/                     # 算法模型目录
```

## 评估指标说明

### 图像准确度
- **汉明距离**：评估标准
  - 0：图像高度相似或重复
  - >0：图像差异明显

### 图像质量
- **颜色匹配度（目标白色差异）**：评估标准
  - <20：高质量
  - 20-50：一般
  - >50：差
  
- **清晰度（拉普拉斯方差）**：评估标准
  - >100：清晰（越高越清晰）
  - 30-100：中等
  - ≤30：差

- **噪声水平（灰度标准差）**：评估标准
  - <30：好
  - 30-50：中
  - >50：差

### 图像纹理

- **纹理复杂度**：评估标准
  - >0.6：优秀
  
- **元素完整性**：评估标准
  - >0.6：完整
  
- **画面质量**：评估标准
  - >0.6：优秀

## 报告类型

系统会生成以下几种报告：

1. **主任务综合报告**：包含整个任务的所有图片处理结果汇总
2. **子任务综合报告**：包含单张图片的所有算法处理结果
3. **单项算法报告**：针对单张图片的特定算法分析结果

## 使用指南

1. 将待处理图片上传到系统
2. 系统自动创建处理任务并分配任务ID
3. 系统对每张图片进行算法分析处理
4. 处理完成后可在报告目录查看分析结果
5. 报告路径通常为：`/backend/reports/task_XXX/`

## 人工干预说明

报告中标记了"是否人工干预"字段，表示该评估结果是否经过了人工审核或修正。这有助于区分算法自动评估与人工确认的结果。

## 系统安装说明

## 运行说明

### 启动后端服务

```bash
cd backend
python app.py
```

默认情况下，后端服务将在 http://localhost:5000 启动

### 启动前端界面

```bash
cd frontend
npm install  # 仅首次运行需要
npm run dev
```

### 使用命令行工具（可选）

系统提供了命令行工具用于快速处理单个或批量图片：

```bash
# 处理单张图片
python tools/process_image.py --input path/to/image.jpg --output path/to/output

# 批量处理目录下所有图片
python tools/batch_process.py --input path/to/images/ --output path/to/output
```
